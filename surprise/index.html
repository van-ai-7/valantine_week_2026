<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A cute Valentine's Day surprise page">
  <meta name="theme-color" content="#ffd0e5">
  <title>Be My Valentine?</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Pacifico&display=swap"
    rel="stylesheet">

  <style>
    body {
      font-family: 'Nunito', sans-serif;
      overflow-x: hidden;
      margin: 0;
      padding: 0;
    }

    /* Animated Gradient Background */
    .animated-bg {
      background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #ffd1ff, #a18cd1);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    @keyframes gradientBG {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* Floating Hearts Background */
    .floating-hearts {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .float-item {
      position: absolute;
      bottom: -10vh;
      color: rgba(255, 255, 255, 0.4);
      font-size: 2rem;
      animation: floatUp linear infinite;
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }

      10% {
        opacity: 0.6;
      }

      90% {
        opacity: 0.6;
      }

      100% {
        transform: translateY(-120vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Glassmorphism Card */
    .glass-card {
      background: rgba(255, 255, 255, 0.65);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.8);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      border-radius: 24px;
      transition: transform 0.3s ease;
      z-index: 10;
    }

    .glass-card:hover {
      transform: translateY(-5px);
    }

    /* Typography */
    .title-font {
      font-family: 'Pacifico', cursive;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* Bounce Animation */
    .bounce {
      animation: bounce 2s ease infinite;
    }

    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-15px);
      }

      60% {
        transform: translateY(-7px);
      }
    }

    /* Button Styles */
    .btn-shadow {
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15);
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .btn-shadow:active {
      transform: scale(0.95);
    }

    /* Image Container */
    .img-container {
      border: 6px solid white;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border-radius: 20px;
      background: white;
      overflow: hidden;
      transform: rotate(-2deg);
      transition: transform 0.5s ease;
    }

    .img-container:hover {
      transform: rotate(0deg) scale(1.02);
    }
  </style>

  <!-- Preload images -->
  <link rel="preload" as="image" href="./images/image1.gif">
  <link rel="preload" as="image" href="./images/image2.gif">
  <link rel="preload" as="image" href="./images/image7.gif">
</head>

<body class="flex items-center justify-center min-h-screen p-4">

  <!-- Background Layers -->
  <div class="animated-bg"></div>
  <div class="floating-hearts" id="floatingHearts"></div>

  <!-- Main Card -->
  <main class="glass-card p-8 md:p-12 max-w-lg w-full text-center relative overflow-hidden">

    <!-- Image Section -->
    <div class="flex justify-center mb-8">
      <div class="img-container">
        <img id="imageDisplay" src="./images/image1.gif" alt="Cute Valentine"
          class="h-[250px] w-[250px] md:h-[300px] md:w-[300px] object-cover" />
      </div>
    </div>

    <!-- Question Section -->
    <div id="questionContainer">
      <h1 id="valentineQuestion" class="title-font text-4xl md:text-5xl text-pink-600 mb-8 leading-tight">
        Will you be my Valentine?
      </h1>

      <!-- Buttons -->
      <div id="responseButtons" class="flex flex-wrap justify-center gap-6 items-center">
        <button id="yesButton"
          class="btn-shadow bounce bg-gradient-to-r from-green-400 to-green-500 text-white font-bold py-3 px-8 rounded-full text-xl hover:from-green-500 hover:to-green-600 focus:outline-none focus:ring-4 focus:ring-green-300">
          Yes üíñ
        </button>
        <button id="noButton"
          class="btn-shadow bg-gradient-to-r from-red-400 to-red-500 text-white font-bold py-3 px-8 rounded-full text-xl hover:from-red-500 hover:to-red-600 focus:outline-none focus:ring-4 focus:ring-red-300 transform transition-transform">
          No üò¢
        </button>
      </div>
    </div>

    <!-- Success Message (Hidden initially) -->
    <div id="successMessage" class="hidden title-font text-4xl md:text-5xl text-pink-600 animate-pulse">
      Yayyy!! I love you! :3 ‚ù§Ô∏è
    </div>

  </main>

  <script>
    (() => {
      // Background Hearts
      const heartsContainer = document.getElementById('floatingHearts');
      const emojis = ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üíï', 'üå∏', '‚ú®'];

      function createHeart() {
        const heart = document.createElement('div');
        heart.classList.add('float-item');
        heart.innerText = emojis[Math.floor(Math.random() * emojis.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 10 + 10) + 's'; // 10-20s duration
        heart.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
        heartsContainer.appendChild(heart);

        // Remove after animation
        setTimeout(() => {
          heart.remove();
        }, 20000);
      }

      // Spawn hearts periodically
      setInterval(createHeart, 500);
      // Spawn initial batch
      for (let i = 0; i < 15; i++) setTimeout(createHeart, Math.random() * 5000);

      // DOM Interaction
      const yesButton = document.getElementById('yesButton');
      const noButton = document.getElementById('noButton');
      const imageDisplay = document.getElementById('imageDisplay');
      const valentineQuestion = document.getElementById('valentineQuestion');
      const responseButtons = document.getElementById('responseButtons');
      const questionContainer = document.getElementById('questionContainer');
      const successMessage = document.getElementById('successMessage');

      let noClickCount = 0;
      const MAX_NO_CLICKS = 5;
      const IMAGE_PATHS = [
        './images/image1.gif',
        './images/image2.gif',
        './images/image3.gif',
        './images/image4.gif',
        './images/image5.gif',
        './images/image6.gif',
        './images/image7.gif',
      ];

      const NO_MESSAGES = [
        'No', 'Are you sure?', 'Pookie please ü•∫',
        "Don't do this :(", "Breaking my heart üíî", "You are not allowed to do this"
      ];

      let isDodging = false;

      const enableDodge = () => {
        isDodging = true;

        // Reset sizes
        yesButton.style.fontSize = '';
        yesButton.style.padding = '';
        noButton.style.transform = 'none'; // Reset any rotation/translation

        // Enable dodge listener
        noButton.addEventListener('mouseover', dodgeHandler);
        noButton.addEventListener('touchstart', dodgeHandler); // For mobile
      };

      const dodgeHandler = () => {
        if (!isDodging) return;

        // Calculate random position within the viewport, but keep it reachable visually
        // Using fixed positioning or relative translation
        const x = Math.random() * (window.innerWidth - noButton.offsetWidth - 40) - (window.innerWidth / 2 - noButton.offsetWidth / 2);
        const y = Math.random() * (window.innerHeight - noButton.offsetHeight - 40) - (window.innerHeight / 2 - noButton.offsetHeight / 2);

        noButton.style.position = 'absolute'; // Switch to absolute to move freely
        noButton.style.transition = 'top 0.2s, left 0.2s'; // Smooth movement

        // Simple random movement within window bounds
        const newX = Math.random() * (window.innerWidth - noButton.offsetWidth);
        const newY = Math.random() * (window.innerHeight - noButton.offsetHeight);

        noButton.style.left = `${newX}px`;
        noButton.style.top = `${newY}px`;
      };

      noButton.addEventListener('click', () => {
        if (isDodging) return; // Should be impossible to click, but just in case

        if (noClickCount >= MAX_NO_CLICKS) {
          return;
        }

        noClickCount++;

        // Change Image
        imageDisplay.src = IMAGE_PATHS[Math.min(noClickCount, IMAGE_PATHS.length - 1)];

        // Change Text
        const messageIndex = Math.min(noClickCount, NO_MESSAGES.length - 1);
        noButton.innerText = NO_MESSAGES[messageIndex];

        // Check if we reached the restricted state
        if (noButton.innerText === "You are not allowed to do this") {
          enableDodge();
          return;
        }

        // Move "No" button frantically (only before dodge mode)
        const randomX = Math.random() * 100 - 50;
        const randomY = Math.random() * 100 - 50;
        noButton.style.transform = `translate(${randomX}px, ${randomY}px) rotate(${Math.random() * 20 - 10}deg)`;

        // Grow "Yes" button
        const currentSize = parseFloat(window.getComputedStyle(yesButton).fontSize);
        const currentPadding = parseFloat(window.getComputedStyle(yesButton).paddingLeft);

        yesButton.style.fontSize = `${currentSize * 1.3}px`;
        yesButton.style.padding = `${currentPadding * 1.2}px ${currentPadding * 1.5}px`;
      });

      yesButton.addEventListener('click', () => {
        // Success State
        imageDisplay.src = './images/image7.gif'; // Happy image
        questionContainer.style.display = 'none';
        successMessage.classList.remove('hidden');

        // Massive Confetti
        const heart = confetti.shapeFromPath({
          path: 'M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z',
        });

        const duration = 5000;
        const end = Date.now() + duration;

        (function frame() {
          confetti({
            particleCount: 5,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            shapes: [heart],
            colors: ['#ff69b4', '#ff1493', '#ff0000']
          });
          confetti({
            particleCount: 5,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            shapes: [heart],
            colors: ['#ff69b4', '#ff1493', '#ff0000']
          });

          if (Date.now() < end) {
            requestAnimationFrame(frame);
          }
        }());
      });
    })();
  </script>
  <script src="romance-toggle.js"></script>
  <script src="countdown.js"></script>
</body>

</html>